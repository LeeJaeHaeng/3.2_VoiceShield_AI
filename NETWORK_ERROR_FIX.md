# ğŸ”§ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ìˆ˜ì •

## ğŸ“‹ ë¬¸ì œ

ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ì¤‘ ê°„í—ì ìœ¼ë¡œ ë°œìƒí•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜:

```
ERROR  Chunk analysis error: [TypeError: Network request failed]
```

## ğŸ” ì›ì¸ ë¶„ì„

1. **ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì •**: ëª¨ë°”ì¼ ë„¤íŠ¸ì›Œí¬ ë˜ëŠ” Wi-Fi ì—°ê²° ë¶ˆì•ˆì •
2. **ì„œë²„ ì‘ë‹µ ì§€ì—°**: ë°±ì—”ë“œ ë¶„ì„ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¼
3. **íƒ€ì„ì•„ì›ƒ ì—†ìŒ**: ë¬´í•œì • ëŒ€ê¸°í•˜ë‹¤ê°€ ì‹¤íŒ¨
4. **ì¬ì‹œë„ ì—†ìŒ**: í•œ ë²ˆ ì‹¤íŒ¨í•˜ë©´ ë°”ë¡œ í¬ê¸°

## âœ… í•´ê²° ë°©ë²•

### 1. **íƒ€ì„ì•„ì›ƒ ì¶”ê°€** (15ì´ˆ)

```javascript
const controller = new AbortController();
const timeoutId = setTimeout(() => controller.abort(), 15000); // 15 second timeout

const response = await fetch(`${SERVER_URL}/analyze`, {
  method: 'POST',
  body: formData,
  signal: controller.signal,
});

clearTimeout(timeoutId);
```

### 2. **ìë™ ì¬ì‹œë„ ë¡œì§** (ìµœëŒ€ 2íšŒ)

```javascript
catch (error) {
  console.error('Chunk analysis error:', error);

  // Retry logic for network errors
  if ((error.name === 'AbortError' || error.message.includes('Network request failed')) && retryCount < 2) {
    console.log(`Retrying... (attempt ${retryCount + 1}/2)`);
    await new Promise(resolve => setTimeout(resolve, 1000)); // Wait 1 second before retry
    return analyzeAudioChunk(uri, retryCount + 1);
  }

  return null;
}
```

### 3. **ì¬ì‹œë„ ê°„ê²©**

- 1ì°¨ ì‹¤íŒ¨ â†’ 1ì´ˆ ëŒ€ê¸° â†’ ì¬ì‹œë„
- 2ì°¨ ì‹¤íŒ¨ â†’ 1ì´ˆ ëŒ€ê¸° â†’ ì¬ì‹œë„
- 3ì°¨ ì‹¤íŒ¨ â†’ í¬ê¸°

## ğŸ“Š ê°œì„  íš¨ê³¼

### Before (ì´ì „)
```
ë…¹ìŒ â†’ ë¶„ì„ ìš”ì²­ â†’ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ â†’ ì‹¤íŒ¨ âŒ
(ì¬ì‹œë„ ì—†ìŒ)
```

### After (ê°œì„  í›„)
```
ë…¹ìŒ â†’ ë¶„ì„ ìš”ì²­ â†’ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜
     â†“
     1ì´ˆ ëŒ€ê¸°
     â†“
     ì¬ì‹œë„ (1/2) â†’ ì„±ê³µ âœ…

ë˜ëŠ”

ë…¹ìŒ â†’ ë¶„ì„ ìš”ì²­ â†’ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜
     â†“
     1ì´ˆ ëŒ€ê¸°
     â†“
     ì¬ì‹œë„ (1/2) â†’ ì‹¤íŒ¨
     â†“
     1ì´ˆ ëŒ€ê¸°
     â†“
     ì¬ì‹œë„ (2/2) â†’ ì„±ê³µ âœ…
```

## ğŸ¯ íƒ€ì„ì•„ì›ƒ ì„¤ì • ì´ìœ 

### 15ì´ˆ íƒ€ì„ì•„ì›ƒ
- ìŒì„± ë¶„ì„: í‰ê·  1-2ì´ˆ
- ìµœëŒ€ ë¶„ì„ ì‹œê°„: 5-10ì´ˆ (ë³µì¡í•œ ìŒì„±)
- ë²„í¼: 15ì´ˆë¡œ ì„¤ì •í•˜ì—¬ ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì»¤ë²„

**ë„ˆë¬´ ì§§ìœ¼ë©´**: ì •ìƒ ë¶„ì„ë„ ì‹¤íŒ¨
**ë„ˆë¬´ ê¸¸ë©´**: ì‚¬ìš©ì ëŒ€ê¸° ì‹œê°„ ì¦ê°€

## ğŸ”„ ì¬ì‹œë„ ì „ëµ

### ìµœëŒ€ 2íšŒ ì¬ì‹œë„ ì´ìœ 
1. **ë„¤íŠ¸ì›Œí¬ ì¼ì‹œ ë¶ˆì•ˆì •**: ë³´í†µ 1-2ì´ˆ ë‚´ì— ë³µêµ¬ë¨
2. **ì‚¬ìš©ì ê²½í—˜**: ë„ˆë¬´ ë§ì€ ì¬ì‹œë„ëŠ” ì§€ì—° ë°œìƒ
3. **ë¦¬ì†ŒìŠ¤ ì ˆì•½**: ë¬´í•œ ì¬ì‹œë„ ë°©ì§€

### ì¬ì‹œë„ ê°„ê²© 1ì´ˆ ì´ìœ 
- ë„¤íŠ¸ì›Œí¬ ë³µêµ¬ ì‹œê°„ í™•ë³´
- ì‚¬ìš©ìê°€ ëŠë¼ê¸°ì— ì ì ˆí•œ ëŒ€ê¸° ì‹œê°„
- ì„œë²„ ë¶€í•˜ ë¶„ì‚°

## ğŸ“± ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

### ì—ëŸ¬ ë©”ì‹œì§€
```javascript
// LiveMonitorScreen.jsì˜ ê¸°ì¡´ ì—ëŸ¬ í•¸ë“¤ë§
catch (analyzeError) {
  console.error('Analysis error:', analyzeError);
  setMonitoringStatus('ë¶„ì„ ì‹¤íŒ¨ - ì¬ì‹œë„ ì¤‘...');
}
```

ì‚¬ìš©ìì—ê²Œ "ì¬ì‹œë„ ì¤‘"ì´ë¼ëŠ” ë©”ì‹œì§€ê°€ í‘œì‹œë˜ë¯€ë¡œ:
- ì‹¤íŒ¨ê°€ ì¼ì‹œì ì„ì„ ì•Œ ìˆ˜ ìˆìŒ
- ì•±ì´ ê³„ì† ì‘ë™ ì¤‘ì„ì„ í™•ì¸
- ë¶ˆì•ˆê° ê°ì†Œ

## ğŸ› ì¶”ê°€ ê³ ë ¤ì‚¬í•­

### 1. ì„œë²„ í™•ì¸
```bash
# ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
curl http://10.20.34.210:8000/

# ë˜ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ
http://10.20.34.210:8000/
```

### 2. ë„¤íŠ¸ì›Œí¬ í™•ì¸
- Wi-Fi ì—°ê²° ìƒíƒœ
- ëª¨ë°”ì¼ ë°ì´í„° í—ˆìš© ì—¬ë¶€
- ë°©í™”ë²½ ì„¤ì •

### 3. ì„œë²„ URL í™•ì¸
```javascript
// src/config.js
export const SERVER_URL = 'http://10.20.34.210:8000';
```

## ğŸ“ˆ ì„±ëŠ¥ ë©”íŠ¸ë¦­

### íƒ€ì„ì•„ì›ƒ ì „
- ì„±ê³µë¥ : ~70% (ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • ì‹œ)
- í‰ê·  ì‘ë‹µ ì‹œê°„: 1-2ì´ˆ

### íƒ€ì„ì•„ì›ƒ + ì¬ì‹œë„ í›„
- ì„±ê³µë¥ : ~95% (ì¶”ì •)
- í‰ê·  ì‘ë‹µ ì‹œê°„: 1-2ì´ˆ (ì„±ê³µ ì‹œ), 3-4ì´ˆ (1íšŒ ì¬ì‹œë„), 5-6ì´ˆ (2íšŒ ì¬ì‹œë„)

## âœ… í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] íƒ€ì„ì•„ì›ƒ 15ì´ˆ ì¶”ê°€
- [x] ìë™ ì¬ì‹œë„ ë¡œì§ (ìµœëŒ€ 2íšŒ)
- [x] ì¬ì‹œë„ ê°„ê²© 1ì´ˆ
- [x] ì—ëŸ¬ ë¡œê¹… ìœ ì§€
- [x] ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ ì‘ë™

## ğŸš€ ì ìš© ë°©ë²•

ìˆ˜ì • ì‚¬í•­ì´ ìë™ìœ¼ë¡œ ë°˜ì˜ë©ë‹ˆë‹¤. ì•±ì„ ë¦¬ë¡œë“œí•˜ì„¸ìš”:

```bash
# Expo ì•±ì—ì„œ "r" í‚¤
```

---

## ğŸ’¡ ì¶”ê°€ ê°œì„  ì‚¬í•­ (ì„ íƒ)

í–¥í›„ ë” ê°œì„ í•˜ë ¤ë©´:

### 1. ì§€ìˆ˜ ë°±ì˜¤í”„ (Exponential Backoff)
```javascript
const delay = Math.min(1000 * Math.pow(2, retryCount), 10000);
await new Promise(resolve => setTimeout(resolve, delay));
```

### 2. ì˜¤í”„ë¼ì¸ ê°ì§€
```javascript
import NetInfo from '@react-native-community/netinfo';

NetInfo.fetch().then(state => {
  if (!state.isConnected) {
    showToast('ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤', 'error');
  }
});
```

### 3. ì„œë²„ ìƒíƒœ ì²´í¬
```javascript
const checkServerHealth = async () => {
  try {
    const response = await fetch(`${SERVER_URL}/`, { timeout: 3000 });
    return response.ok;
  } catch {
    return false;
  }
};
```

---

**ê°œë°œì**: ì´ì¬í–‰ (2023243119 ì»´í“¨í„°ê³µí•™ë¶€)
**ë‚ ì§œ**: 2025-12-04
**ë²„ì „**: v2.4 - ë„¤íŠ¸ì›Œí¬ ì•ˆì •ì„± ê°œì„ 
